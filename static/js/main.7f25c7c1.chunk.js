(this.webpackJsonpelementary=this.webpackJsonpelementary||[]).push([[0],{53:function(e,t,a){e.exports=a(75)},58:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(15),u=a.n(s),l=a(17),c=a(20),i=a(22),o=a(21),m=a(18),d=a(7),h=a(6),f=(a(58),r.a.createContext(null)),p=function(e){return function(t){return r.a.createElement(f.Consumer,null,(function(a){return r.a.createElement(e,Object.assign({},t,{firebase:a}))}))}},E=f,v=a(34),b=a.n(v),O=(a(62),a(64),{apiKey:"AIzaSyCAjPshcinKK1pwRGo95YcFll1b89n3wSY",authDomain:"elementary-school-e4a68.firebaseapp.com",databaseURL:"https://elementary-school-e4a68.firebaseio.com",projectId:"elementary-school-e4a68",storageBucket:"elementary-school-e4a68.appspot.com",messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/elementarydatabase",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_API_KEY:"AIzaSyCAjPshcinKK1pwRGo95YcFll1b89n3wSY",REACT_APP_AUTH_DOMAIN:"elementary-school-e4a68.firebaseapp.com",REACT_APP_DATABASE_URL:"https://elementary-school-e4a68.firebaseio.com",REACT_APP_PROJECT_ID:"elementary-school-e4a68",REACT_APP_STORAGE_BUCKET:"elementary-school-e4a68.appspot.com"}).REACT_APP_MESSAGING_SENDER_ID}),S=function e(){var t=this;Object(l.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,a){return t.auth.createUserWithEmailAndPassword(e,a)},this.doSignInWithEmailAndPassword=function(e,a){return t.auth.signInWithEmailAndPassword(e,a)},this.doSignOut=function(){return t.auth.signOut()},this.user=function(e){return t.db.ref("users/".concat(e))},this.users=function(){return t.db.ref("users")},this.student=function(e){return t.db.ref("students/".concat(e))},this.students=function(){return t.db.ref("students")},this.teacher=function(e){return t.db.ref("teachers/".concat(e))},this.teachers=function(){return t.db.ref("teachers")},this.class=function(e){return t.db.ref("classes/".concat(e))},this.classes=function(){return t.db.ref("classes")},b.a.initializeApp(O),this.auth=b.a.auth(),this.db=b.a.database()},g=a(5),j=(a(68),p((function(e){var t=e.firebase;return r.a.createElement(g.a,{variant:"danger",onClick:t.doSignOut},"Sign Out")}))),C="/home",y=function(){return r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement(j,null),r.a.createElement("li",null,r.a.createElement(m.b,{as:g.a,to:C},"View Only")),r.a.createElement("li",null,r.a.createElement(m.b,{as:g.a,to:"/admin"},"Admin View"))))},w=function(){return r.a.createElement("div",null,r.a.createElement("ul",null,r.a.createElement(j,null),r.a.createElement("li",null,r.a.createElement(m.b,{to:C},"Home!"))))},A=function(){return r.a.createElement("ul",null,r.a.createElement(m.b,{to:"/signin"},"Sign In"))},_=p((function(e){var t=e.authUser,a=e.firebase,s=Object(n.useState)(r.a.createElement(A,null)),u=Object(h.a)(s,2),l=u[0],c=u[1],i=Object(n.useState)(t),o=Object(h.a)(i,2),m=o[0],d=o[1];return Object(n.useEffect)((function(){var e,t=(e=d,a.auth.onAuthStateChanged((function(t){e(t)})));return function(){t()}}),[]),Object(n.useEffect)((function(){m?a.user(m.uid).once("value").then((function(e){"admin"===e.val().role?c(r.a.createElement(y,null)):c(r.a.createElement(w,null))})):c(r.a.createElement(A,null))}),[m]),r.a.createElement("div",null,l)})),T=a(24),P=a(25),N=a(32),k={username:"",email:"",passwordOne:"",passwordTwo:"",error:null},x=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onSubmit=function(e){var t=n.state,a=t.username,r=t.email,s=t.passwordOne;n.props.firebase.doCreateUserWithEmailAndPassword(r,s).then((function(e){return n.props.firebase.user(e.user.uid).set({username:a,email:r,role:"teacher"})})).then((function(){n.setState(Object(P.a)({},k)),n.props.history.push(C)})).catch((function(e){n.setState({error:e})})),e.preventDefault()},n.onChange=function(e){n.setState(Object(T.a)({},e.target.name,e.target.value))},n.state=Object(P.a)({},k),n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.passwordOne,s=e.passwordTwo,u=e.error,l=n!==s||""===n||""===a||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{name:"username",value:t,onChange:this.onChange,type:"text",placeholder:"Full Name"}),r.a.createElement("input",{name:"email",value:a,onChange:this.onChange,type:"text",placeholder:"Email Address"}),r.a.createElement("input",{name:"passwordOne",value:n,onChange:this.onChange,type:"password",placeholder:"Password"}),r.a.createElement("input",{name:"passwordTwo",value:s,onChange:this.onChange,type:"password",placeholder:"Confirm Password"}),r.a.createElement("button",{disabled:l,type:"submit"},"Sign Up"),u&&r.a.createElement("p",null,u.message))}}]),a}(n.Component),I=function(){return r.a.createElement("p",null,"Don't have an account? ",r.a.createElement(m.b,{to:"/signup"},"Sign Up"))},U=Object(N.a)(d.e,p)(x),K=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"SignUp"),r.a.createElement(U,null))},B={email:"",password:"",error:null},D=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).onSubmit=function(e){var t=n.state,a=t.email,r=t.password;n.props.firebase.doSignInWithEmailAndPassword(a,r).then((function(){n.setState(Object(P.a)({},B)),n.props.history.push(C)})).catch((function(e){n.setState({error:e})})),e.preventDefault()},n.onChange=function(e){n.setState(Object(T.a)({},e.target.name,e.target.value))},n.state=Object(P.a)({},B),n}return Object(c.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.error,s=""===a||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{name:"email",value:t,onChange:this.onChange,type:"text",placeholder:"Email Address"}),r.a.createElement("input",{name:"password",value:a,onChange:this.onChange,type:"password",placeholder:"Password"}),r.a.createElement("button",{disabled:s,type:"submit"},"Sign In"),n&&r.a.createElement("p",null,n.message))}}]),a}(n.Component),R=Object(N.a)(d.e,p)(D),W=function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"SignIn"),r.a.createElement(R,null),r.a.createElement(I,null))},H=a(19),V=a(12),Y=a(9),G=a(33),L=a(16),M=p((function(e){var t=Object(n.useState)([]),a=Object(h.a)(t,2),s=a[0],u=a[1],l=Object(n.useState)([]),c=Object(h.a)(l,2),i=c[0],o=c[1],m=Object(n.useState)([]),d=Object(h.a)(m,2),f=d[0],p=d[1];return Object(n.useEffect)((function(){e.firebase.students().on("value",(function(e){var t=e.val(),a=[];for(var n in t)a.push({id:n,name:t[n].name});u(a)})),e.firebase.teachers().on("value",(function(e){var t=e.val(),a=[];for(var n in t)a.push({id:n,name:t[n].name});o(a)})),e.firebase.classes().on("value",(function(e){var t=e.val(),a=[];for(var n in t)a.push({id:n,name:t[n].name,amountOfStudents:t[n].amountOfStudents,students:t[n].students?t[n].students:[],teacher:t[n].teacher});p(a)}))}),[e.firebase]),r.a.createElement(G.a,null,r.a.createElement(H.a,null,r.a.createElement(V.a,null,s.map((function(e){return r.a.createElement(Y.a,{style:{width:"10rem"}},r.a.createElement(Y.a.Body,null,"Student: ",e.name))}))),r.a.createElement(V.a,null,i.map((function(e){return r.a.createElement(Y.a,{style:{width:"10rem"}},r.a.createElement(Y.a.Body,null,"Teacher: ",e.name))}))),r.a.createElement(V.a,null,f.map((function(e){return r.a.createElement(Y.a,null,r.a.createElement(L.a,null,r.a.createElement(Y.a.Header,null,r.a.createElement(L.a.Toggle,{as:g.a,variant:"link",eventKey:e.index},e.name," with ",e.amountOfStudents," total students, the teacher is ",e.teacher.name,".")),r.a.createElement(L.a.Collapse,{eventKey:e.index},r.a.createElement(Y.a.Body,null,e.students.map((function(e){return r.a.createElement(V.a,null,e.name)}))))))})))))})),z=a(29),F=a(43),J=p((function(e){var t=Object(n.useState)(e.name),a=Object(h.a)(t,2),s=a[0],u=a[1],l=Object(n.useState)(!1),c=Object(h.a)(l,2),i=c[0],o=c[1],m=Object(n.useState)(e.studentCount),d=Object(h.a)(m,2),f=d[0],p=d[1],E=Object(n.useState)(e.studentsAssigned?e.studentsAssigned:[]),v=Object(h.a)(E,2),b=v[0],O=v[1],S=Object(n.useState)(e.teacherAssigned),j=Object(h.a)(S,2),C=j[0],y=j[1],w=Object(n.useState)(e.id),A=Object(h.a)(w,1)[0];Object(n.useEffect)((function(){e.firebase.classes().on("value",(function(e){var t=e.val();for(var a in t)a===A&&(y(t[a].teacher),O(t[a].students?t[a].students:[]),p(t[a].amountOfStudents))}))}),[i]);var _=function(){var t=document.getElementById("roomName").value;return e.firebase.class(A).update({name:t}),u(t)};return r.a.createElement("div",null,i?function(){var t=[],a=[];return e.students.map((function(e){(function(e){var t;for(t=0;t<b.length;t++)if(b[t].id===e.id)return!0;return!1})(e)||t.push({value:e.id,label:e.name})})),e.teachers.map((function(e){a.push({value:e.id,label:e.name})})),r.a.createElement(Y.a,null,r.a.createElement(L.a,null,r.a.createElement(Y.a.Header,null,"Change class name:",r.a.createElement("textarea",{defaultValue:s,className:"note__textarea",onChange:function(){return _()},id:"roomName",style:{height:"25px"}}),r.a.createElement(L.a.Toggle,{as:g.a,variant:"link",eventKey:A},"with ",f," total students, the teacher is ",C.name,".")),r.a.createElement(L.a.Collapse,{eventKey:A},r.a.createElement(Y.a.Body,null,r.a.createElement(F.a,{options:a,onChange:function(t){return function(t){var a=t.value;0!==a&&e.teachers.map((function(t){t.id===a&&(y(t),e.firebase.class(A).update({teacher:{id:t.id,name:t.name}}))}))}(t)},placeholder:"Select a teacher to set",value:0}),b.map((function(e){return r.a.createElement(V.a,null,e.name)})),r.a.createElement(F.a,{options:t,onChange:function(t){return function(t){var a=t.value;0!==a&&e.students.map((function(t){t.id===a&&(O([].concat(Object(z.a)(b),[t])),p(f+1),e.firebase.class(A).update({students:[].concat(Object(z.a)(b),[t]),amountOfStudents:f+1}))}))}(t)},placeholder:"Select a student to add",value:0}),r.a.createElement(g.a,{variant:"dark",onClick:function(){return o(!1),void _()}},"Save Class!")))))}():r.a.createElement(Y.a,null,r.a.createElement(L.a,null,r.a.createElement(Y.a.Header,null,r.a.createElement(L.a.Toggle,{as:g.a,variant:"link",eventKey:A},s," with ",f," total students, the teacher is ",C.name,".")),r.a.createElement(L.a.Collapse,{eventKey:A},r.a.createElement(Y.a.Body,null,b.map((function(e){return r.a.createElement(V.a,null,e.name)})),r.a.createElement(g.a,{variant:"warning",onClick:function(){return o(!0)}},"Edit Class!"))))))}));var q=function(e){var t=r.a.useState(e.id),a=Object(h.a)(t,2),n=a[0],s=(a[1],r.a.useState(e.name)),u=Object(h.a)(s,2),l=u[0],c=u[1],i=r.a.useState(!1),o=Object(h.a)(i,2),m=o[0],d=o[1],f=function(){m&&p(),d(!m)},p=function(){var t=document.getElementById("teacher").value;c(t),e.updateName(t,n)};return r.a.createElement(Y.a,{style:{width:"25rem"}},r.a.createElement(Y.a.Body,null,r.a.createElement(H.a,null,m?r.a.createElement("div",null,r.a.createElement("textarea",{defaultValue:l,className:"note__textarea",id:"teacher",style:{width:"100px"}}),r.a.createElement(g.a,{className:"note__save",variant:"dark",onClick:function(){return f()}}," Save ")):l),r.a.createElement(H.a,{className:"text-center"},m?"":r.a.createElement(g.a,{variant:"warning",onClick:function(){return f()}}," Edit Teacher"))))};var Q=function(e){var t=r.a.useState(e.id),a=Object(h.a)(t,2),n=a[0],s=(a[1],r.a.useState(e.name)),u=Object(h.a)(s,2),l=u[0],c=u[1],i=r.a.useState(!1),o=Object(h.a)(i,2),m=o[0],d=o[1],f=function(){m&&p(),d(!m)},p=function(){var t=document.getElementById("textarea").value;c(t),e.updateName(t,n)};return r.a.createElement(Y.a,{style:{width:"25rem"}},r.a.createElement(Y.a.Body,null,r.a.createElement(H.a,null,m?r.a.createElement("div",null,r.a.createElement("textarea",{defaultValue:l,className:"note__textarea",id:"textarea",style:{width:"100px"}}),r.a.createElement(g.a,{className:"note__save",variant:"dark",onClick:function(){return f()}}," Save ")):l),r.a.createElement(H.a,null,m?"":r.a.createElement(g.a,{variant:"warning",onClick:function(){return f()}}," Edit Student"))))},X=p(function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.props.firebase.students().on("value",(function(e){var t=e.val(),a=[];for(var r in t)a.push({id:r,name:t[r].name});n.setState({students:a})})),n.props.firebase.teachers().on("value",(function(e){var t=e.val(),a=[];for(var r in t)a.push({id:r,name:t[r].name});n.setState({teachers:a})})),n.props.firebase.classes().on("value",(function(e){var t=e.val(),a=[];for(var r in t)a.push({id:r,name:t[r].name,amountOfStudents:t[r].amountOfStudents,students:t[r].students?t[r].students:[],teacher:t[r].teacher});n.setState({classes:a})}))},n.updateStudentName=function(e,t){n.state.students.map((function(a){a.id===t&&(a.name=e,n.props.firebase.student(a.id).update({name:e}),n.state.classes.map((function(a){a.students.map((function(a){a.id===t&&(a.name=e)})),n.props.firebase.class(a.id).update({students:a.students})})))}))},n.updateTeacherName=function(e,t){n.state.teachers.map((function(a){a.id===t&&(a.name=e,n.props.firebase.teacher(a.id).update({name:e,id:a.id}),n.state.classes.map((function(t){a.id===t.teacher.id&&(n.setState((function(a){var n=a.classes.indexOf(t),r=a.classes[n];return console.log(r),r.name=e,console.log(r),a.classes.splice(n,1),{classes:[].concat(Object(z.a)(a.classes),[r])}})),n.props.firebase.class(t.id).update({teacher:{name:e,id:a.id}}))})))}))},n.addStudent=function(){n.props.firebase.students().push({name:"Student"})},n.addTeacher=function(){n.props.firebase.teachers().push({name:"Teacher"})},n.addClass=function(){n.props.firebase.classes().push({name:"Class",teacher:{name:"NOT SET YET",id:" "},amountOfStudents:0,students:[]})},n.state={students:[],classes:[],teachers:[]},n}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(G.a,{fluid:!0},r.a.createElement(H.a,null,r.a.createElement(V.a,{className:"text-center"},r.a.createElement(g.a,{variant:"primary",onClick:function(){return e.addStudent()}},"New Student"),this.state.students.map((function(t){return r.a.createElement(Q,{id:t.id,name:t.name,updateName:e.updateStudentName})}))),r.a.createElement(V.a,{className:"text-center"},r.a.createElement(g.a,{variant:"primary",onClick:function(){return e.addTeacher()}},"New Teacher"),this.state.teachers.map((function(t){return r.a.createElement(q,{id:t.id,name:t.name,updateName:e.updateTeacherName})}))),r.a.createElement(V.a,{xs:5},r.a.createElement(g.a,{variant:"primary",onClick:function(){return e.addClass()}},"New Class"),this.state.classes.map((function(t){return r.a.createElement(J,{teachers:e.state.teachers,students:e.state.students,name:t.name,studentsAssigned:t.students,teacherAssigned:t.teacher,id:t.id,studentCount:t.amountOfStudents,firebase:e.props.firebase})})))))}}]),a}(n.Component)),Z=p(function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={authUser:null},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.auth.onAuthStateChanged((function(t){t?e.setState({authUser:t}):e.setState({authUser:null})}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return r.a.createElement(m.a,null,r.a.createElement("div",null,r.a.createElement(_,{authUser:this.state.authUser}),r.a.createElement("hr",null),r.a.createElement(d.a,{path:"/signup",component:K}),r.a.createElement(d.a,{path:"/signin",component:W}),r.a.createElement(d.a,{path:C,component:M}),r.a.createElement(d.a,{path:"/admin",component:X})))}}]),a}(n.Component));a(74);u.a.render(r.a.createElement(E.Provider,{value:new S},r.a.createElement(Z,null)),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.7f25c7c1.chunk.js.map